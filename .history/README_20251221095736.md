# üì± E-Commerce Phone Store - Monorepo Project

> üî§ **Ng√¥n ng·ªØ m·∫∑c ƒë·ªãnh: ti·∫øng Vi·ªát** cho t√†i li·ªáu, PR/Issue v√† b√¨nh lu·∫≠n review.

D·ª± √°n monorepo bao g·ªìm backend API (Express.js + TypeScript) v√† 2 frontend apps (Next.js) cho h·ªá th·ªëng b√°n ƒëi·ªán tho·∫°i v√† s·∫£n ph·∫©m Apple.

## üìã M·ª•c L·ª•c

- [T·ªïng Quan](#t·ªïng-quan)
- [Tech Stack](#tech-stack)
- [C·∫•u Tr√∫c D·ª± √Ån](#c·∫•u-tr√∫c-d·ª±-√°n)
- [H∆∞·ªõng D·∫´n C√†i ƒê·∫∑t](#h∆∞·ªõng-d·∫´n-c√†i-ƒë·∫∑t)
- [Ch·∫°y ·ª®ng D·ª•ng](#ch·∫°y-·ª©ng-d·ª•ng)
- [Bi·∫øn M√¥i Tr∆∞·ªùng](#bi·∫øn-m√¥i-tr∆∞·ªùng)
- [API Documentation](#api-documentation)
- [ƒê√≥ng G√≥p](#ƒë√≥ng-g√≥p)
- [Troubleshooting](#troubleshooting)

## üéØ T·ªïng Quan

D·ª± √°n n√†y l√† m·ªôt h·ªá th·ªëng e-commerce ho√†n ch·ªânh b√°n s·∫£n ph·∫©m Apple (ƒëi·ªán tho·∫°i, tablet, laptop, ƒë·ªìng h·ªì, ph·ª• ki·ªán) v·ªõi:

- **Backend API** (`backend/`): RESTful API v·ªõi authentication, RBAC, session management, v√† x·ª≠ l√Ω thanh to√°n
- **Customer Frontend** (`phone-app/`): Trang web kh√°ch h√†ng v·ªõi Next.js 14 App Router
- **Admin Dashboard** (`admin-dashboard/`): B·∫£ng ƒëi·ªÅu khi·ªÉn qu·∫£n tr·ªã v·ªõi Next.js 14, shadcn/ui v√† React Query
- **Database**: PostgreSQL v·ªõi Prisma ORM, h·ªó tr·ª£ category hierarchy linh ho·∫°t

## üõ† Tech Stack

### Backend (`backend/`)

- **Runtime**: Node.js 20+ + TypeScript 5.x
- **Framework**: Express.js 4.x
- **Database**: PostgreSQL 12+
- **ORM**: Prisma 6.x
- **Authentication**: JWT (Access + Refresh Token)
- **Session**: RefreshSession model v·ªõi HTTP-only cookies
- **Validation**: Zod schemas
- **Security**: Helmet, CORS, Rate Limiting, bcrypt
- **File Upload**: Multer
- **API Testing**: `.http` files (VS Code REST Client)

### Frontend - Customer App (`phone-app/`)

- **Framework**: Next.js 15 (App Router)
- **Language**: TypeScript 5.x
- **UI Library**: Radix UI + shadcn/ui
- **Styling**: Tailwind CSS 4.x
- **Icons**: Lucide React
- **Forms**: React Hook Form + Zod
- **Theme**: next-themes (dark/light mode)
- **API Client**: Custom fetch-based client v·ªõi auto-refresh

### Frontend - Admin Dashboard (`admin-dashboard/`)

- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript 5.x
- **UI Components**: shadcn/ui + Radix UI
- **Styling**: Tailwind CSS 3.x
- **State Management**: Zustand 4.x
- **Server State**: React Query (@tanstack/react-query 5.x)
- **Forms**: React Hook Form + Zod
- **API Client**: Axios v·ªõi JWT interceptor
- **Charts**: Recharts 2.x
- **Notifications**: Sonner
- **Icons**: Lucide React

### DevOps & Tools

- **Containerization**: Docker & Docker Compose
- **Package Manager**: npm
- **Version Control**: Git
- **Development**: Nodemon, ts-node, tsx

## üìÅ C·∫•u Tr√∫c D·ª± √Ån

```
d:\Work\newpro/
‚îú‚îÄ‚îÄ backend/                          # Backend API (Express + TypeScript)
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.ts                   # Express app setup v·ªõi middlewares
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts                 # Server entry point
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/             # Request handlers (auth, product, order, cart, etc.)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/                # Business logic layer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/                  # API routes
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.route.ts       # /api/auth/*
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product.route.ts    # /api/products/*
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ category.route.ts   # /api/categories/*
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order.route.ts      # /api/orders/*
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart.route.ts       # /api/cart/*
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.route.ts      # /api/admin/*
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.route.ts  # /api/dashboard/*
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ upload.route.ts     # /api/upload/*
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas/                 # Zod validation schemas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middlewares/             # auth, error handling, validation
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/                   # jwt, env, prisma client, cookies
‚îÇ   ‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma           # Database schema v·ªõi Category hierarchy
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ seed.ts                 # Seed data
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations/             # Database migrations
‚îÇ   ‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create-admin.ts         # Script t·∫°o admin user
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ fix-admin-role.ts       # Script fix admin role
‚îÇ   ‚îú‚îÄ‚îÄ public/pictures/            # Product images (static files)
‚îÇ   ‚îú‚îÄ‚îÄ uploads/                    # User uploaded files
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml
‚îÇ   ‚îî‚îÄ‚îÄ *.http                      # API testing files
‚îÇ
‚îú‚îÄ‚îÄ phone-app/                        # Customer Frontend (Next.js 15)
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/                    # Next.js App Router
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx          # Root layout
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx            # Home page
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (auth)/             # Auth routes (login, register)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (account)/          # Account routes (profile, orders)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ products/           # Product pages
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ checkout/           # Checkout flow
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/             # Reusable React components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth-provider.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login-form.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/                 # shadcn/ui components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/                    # Utilities
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.ts              # API client
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth-client.ts      # Auth utilities
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ token.ts            # Token management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/                  # Custom React hooks
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/                  # Helper functions
‚îÇ   ‚îú‚îÄ‚îÄ public/pictures/            # Static product images
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json
‚îÇ   ‚îî‚îÄ‚îÄ next.config.ts
‚îÇ
‚îú‚îÄ‚îÄ admin-dashboard/                  # Admin Dashboard (Next.js 14)
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx          # Root layout v·ªõi providers
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ providers.tsx       # React Query + Toast providers
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (auth)/             # Auth routes
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ login/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ (dashboard)/        # Protected admin routes
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ layout.tsx      # Dashboard layout (sidebar + header)
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ page.tsx        # Dashboard home
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ products/       # Product management
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ orders/         # Order management
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ customers/      # Customer management
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ categories/     # Category management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/             # sidebar, header
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ products/           # Product-specific components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/          # Dashboard widgets
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/                 # shadcn/ui components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-auth.ts         # React Query auth hook
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ use-categories.ts   # React Query category hook
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.ts              # Axios instance v·ªõi JWT interceptor
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.ts             # Auth utilities
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/                  # TypeScript types
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ store/                  # Zustand stores
‚îÇ   ‚îú‚îÄ‚îÄ public/pictures/            # Shared product images
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json
‚îÇ   ‚îú‚îÄ‚îÄ tailwind.config.ts
‚îÇ   ‚îî‚îÄ‚îÄ DESIGN_SYSTEM.md            # Design system documentation
‚îÇ
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ copilot-instructions.md     # GitHub Copilot instructions
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ GIT_TROUBLESHOOTING.md          # Git troubleshooting guide
‚îú‚îÄ‚îÄ BACKEND_SUMMARY.md              # Backend documentation
‚îú‚îÄ‚îÄ ORDER_FLOW_GUIDE.md             # Order flow documentation
‚îî‚îÄ‚îÄ README.md                        # This file
```

## üöÄ H∆∞·ªõng D·∫´n C√†i ƒê·∫∑t

### Y√™u C·∫ßu Ti√™n Quy·∫øt

- Node.js >= 16.x
- npm >= 8.x
- PostgreSQL >= 12.x (for local development)
- Docker & Docker Compose (optional, for containerized setup)

### Clone Repository

```bash
git clone https://github.com/huyshelby/tesst.git
cd newpro
```

### Backend Setup

```bash
cd backend

# C√†i dependencies
npm install

# Setup environment variables (t·∫°o file .env)
# Copy t·ª´ m·∫´u b√™n d∆∞·ªõi ho·∫∑c xem ph·∫ßn Bi·∫øn M√¥i Tr∆∞·ªùng

# Kh·ªüi ƒë·ªông PostgreSQL (s·ª≠ d·ª•ng Docker - recommended)
docker-compose up -d

# T·∫°o database v√† ch·∫°y migrations
npx prisma migrate dev

# (Optional) Seed database v·ªõi sample data
npm run seed

# (Optional) T·∫°o admin user
npm run create-admin

# Kh·ªüi ƒë·ªông dev server
npm run dev
# Server ch·∫°y t·∫°i http://localhost:4000
```

### Frontend Setup

**Phone App (Customer)**:

```bash
cd phone-app

# C√†i dependencies
npm install

# Setup environment variables (t·∫°o file .env.local)
# NEXT_PUBLIC_API_BASE_URL=http://localhost:4000/api

# Ch·∫°y dev server
npm run dev
# App ch·∫°y t·∫°i http://localhost:3000
```

**Admin Dashboard**:

```bash
cd admin-dashboard

# C√†i dependencies
npm install

# Setup environment variables (t·∫°o file .env.local)
# NEXT_PUBLIC_API_URL=http://localhost:4000/api

# Ch·∫°y dev server
npm run dev
# Dashboard ch·∫°y t·∫°i http://localhost:3001
```

## üé¨ Ch·∫°y ·ª®ng D·ª•ng

### Development Mode

**Backend** (Terminal 1):

```bash
cd backend
npm run dev
# Server ch·∫°y t·∫°i http://localhost:4000
# API base: http://localhost:4000/api
```

**Phone App - Customer Frontend** (Terminal 2):

```bash
cd phone-app
npm run dev
# App ch·∫°y t·∫°i http://localhost:3000
```

**Admin Dashboard** (Terminal 3):

```bash
cd admin-dashboard
npm run dev
# Dashboard ch·∫°y t·∫°i http://localhost:3001
```

### S·ª≠ D·ª•ng Docker Compose (Backend + Database)

```bash
cd backend
docker-compose up -d
```

ƒêi·ªÅu n√†y s·∫Ω:

- Kh·ªüi ƒë·ªông PostgreSQL container tr√™n port 5432
- Database: `mini_db`
- Credentials: `postgres:password`

**L∆∞u √Ω**: Docker Compose ch·ªâ setup database, b·∫°n v·∫´n c·∫ßn ch·∫°y backend v√† frontend ri√™ng.

### Build & Production

**Backend**:

```bash
cd backend
npm run build      # Compile TypeScript
npm start          # Run production server
```

**Phone App**:

```bash
cd phone-app
npm run build
npm start
```

**Admin Dashboard**:

```bash
cd admin-dashboard
npm run build
npm start
```

## üîê Bi·∫øn M√¥i Tr∆∞·ªùng

### Backend (`backend/.env`)

```env
# Database
DATABASE_URL="postgresql://postgres:password@localhost:5432/mini_db?schema=public"

# JWT Secrets
JWT_SECRET=super-secret-access-32bytes
JWT_REFRESH_SECRET=super-secret-refresh-32bytes

# Session Configuration
REFRESH_TOKEN_DAYS=30
COOKIE_NAME=refresh_token

# Server
PORT=4000
NODE_ENV=development

# CORS (already configured in app.ts)
# Supports: http://localhost:3000 (phone-app) v√† http://localhost:3001 (admin-dashboard)
```

### Phone App (`phone-app/.env.local`)

```env
# Backend API URL
NEXT_PUBLIC_API_BASE_URL=http://localhost:4000/api
```

### Admin Dashboard (`admin-dashboard/.env.local`)

```env
# Backend API URL
NEXT_PUBLIC_API_URL=http://localhost:4000/api
```

**L∆∞u √Ω quan tr·ªçng**:

- ‚ö†Ô∏è Backend ch·∫°y tr√™n port **4000** (kh√¥ng ph·∫£i 3001)
- Phone App ch·∫°y tr√™n port **3000**
- Admin Dashboard ch·∫°y tr√™n port **3001**
- Refresh token ƒë∆∞·ª£c l∆∞u trong HTTP-only cookie
- Access token c√≥ th·ªùi h·∫°n 15 ph√∫t, refresh token 30 ng√†y

## üìö API Documentation

### API Base URL

- **Development**: `http://localhost:4000/api`
- **Health Check**: `http://localhost:4000/health`

### Authentication Routes (`/api/auth`)

- `POST /api/auth/register` - User registration
- `POST /api/auth/login` - User login (returns access token + refresh token cookie)
- `POST /api/auth/logout` - User logout (clears refresh token)
- `POST /api/auth/refresh` - Refresh access token
- `GET /api/auth/me` - Get current authenticated user

### Password Reset Routes (`/api/password`)

- `POST /api/password/forgot` - Request password reset
- `POST /api/password/reset` - Reset password with token

### Category Routes (`/api/categories`)

- `GET /api/categories` - List all categories (supports hierarchy)
- `GET /api/categories/:id` - Get category by ID
- `POST /api/categories` - Create category (Admin only)
- `PUT /api/categories/:id` - Update category (Admin only)
- `DELETE /api/categories/:id` - Delete category (Admin only)

### Product Routes (`/api/products`)

- `GET /api/products` - List products (with filters, pagination)
- `GET /api/products/:id` - Get product details
- `POST /api/products` - Create product (Admin only)
- `PUT /api/products/:id` - Update product (Admin only)
- `DELETE /api/products/:id` - Delete product (Admin only)

### Cart Routes (`/api/cart`)

- `GET /api/cart` - Get user's cart
- `POST /api/cart/items` - Add item to cart
- `PUT /api/cart/items/:id` - Update cart item
- `DELETE /api/cart/items/:id` - Remove cart item
- `DELETE /api/cart` - Clear cart

### Order Routes (`/api/orders`)

- `GET /api/orders` - List user's orders
- `GET /api/orders/:id` - Get order details
- `POST /api/orders` - Create order
- `PUT /api/orders/:id/status` - Update order status (Admin only)

### Dashboard Routes (`/api/dashboard`) - Admin Only

- `GET /api/dashboard/stats` - Dashboard statistics
- `GET /api/dashboard/revenue` - Revenue analytics
- `GET /api/dashboard/products/top` - Top selling products

### Admin Routes (`/api/admin`) - Admin Only

- `GET /api/admin/users` - List all users
- `PUT /api/admin/users/:id/role` - Update user role
- `DELETE /api/admin/users/:id` - Delete user

### Upload Routes (`/api/upload`)

- `POST /api/upload` - Upload product image (Admin only)

### Static File Serving

- `/pictures/*` - Product images t·ª´ `backend/public/pictures/`
- `/uploads/*` - User uploaded files t·ª´ `backend/uploads/`

### Testing API

S·ª≠ d·ª•ng file `.http` trong th∆∞ m·ª•c `backend/`:

- `test-simple.http` - Basic CRUD operations
- `test-rbac.http` - Role-based access control testing
- `test-category.http` - Category API testing
- `test-order-flow.http` - Order flow testing
- `test-ecommerce.http` - E-commerce flow testing

**V·ªõi VS Code REST Client extension**:

1. C√†i extension "REST Client"
2. M·ªü file `.http`
3. Click "Send Request" tr√™n m·ªói request

**Ho·∫∑c d√πng curl**:

```bash
# Login
curl -X POST http://localhost:4000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@example.com","password":"admin123"}'

# Get products
curl http://localhost:4000/api/products
```

Chi ti·∫øt ƒë·∫ßy ƒë·ªß xem:

- [API-RBAC.md](./backend/API-RBAC.md) - Authentication & Authorization
- [API-CATEGORY.md](./backend/API-CATEGORY.md) - Category API
- [API-ECOMMERCE.md](./backend/API-ECOMMERCE.md) - E-commerce APIs
- [ORDER_FLOW_GUIDE.md](./ORDER_FLOW_GUIDE.md) - Order flow documentation

## üìù Database Schema

Database s·ª≠ d·ª•ng Prisma ORM v·ªõi PostgreSQL. Xem ƒë·∫ßy ƒë·ªß trong [prisma/schema.prisma](./backend/prisma/schema.prisma).

### Core Models

#### User

```prisma
model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String   // bcrypt hashed
  name      String
  role      Role     @default(USER)  // USER | ADMIN
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
```

#### RefreshSession

```prisma
model RefreshSession {
  id         String    @id @default(uuid())
  userId     String
  expiresAt  DateTime
  revokedAt  DateTime?  // null = active, non-null = revoked
}
```

#### Category (Hierarchical)

```prisma
model Category {
  id          String     @id @default(uuid())
  name        String     @unique
  slug        String     @unique
  description String?
  parentId    String?    // Self-reference for hierarchy
  parent      Category?  @relation("CategoryHierarchy")
  children    Category[] @relation("CategoryHierarchy")
  products    Product[]
  displayOrder Int       @default(0)
  isActive    Boolean    @default(true)
}
```

**V√≠ d·ª• hierarchy**: "ƒêi·ªán tho·∫°i" ‚Üí "iPhone" ‚Üí "iPhone 15 Series"

#### Product

```prisma
model Product {
  id          String   @id @default(uuid())
  name        String
  slug        String   @unique
  description String?
  price       Float
  listPrice   Float?   // Original price (for discount display)
  image       String
  images      String[] // Additional images
  categoryId  String
  category    Category @relation(fields: [categoryId])
  brand       String
  stock       Int      @default(0)
  rating      Float?   @default(0)
  reviews     Int      @default(0)
  badges      String[] // ["Tr·∫£ g√≥p 0%", "Gi·∫£m s·ªëc"]
  installment Boolean  @default(false)
  isActive    Boolean  @default(true)
  ram         Int?
  storage     Int?
  specs       Json?    // Flexible specs object
}
```

#### Cart & CartItem

```prisma
model Cart {
  id        String   @id @default(uuid())
  userId    String?  @unique      // For logged-in users
  sessionId String?  @unique      // For anonymous users
  items     CartItem[]
}

model CartItem {
  id              String  @id @default(uuid())
  cartId          String
  productId       String
  quantity        Int     @default(1)
  selectedColor   String?
  selectedStorage String?
}
```

#### Order & OrderItem

```prisma
model Order {
  id            String        @id @default(uuid())
  userId        String
  orderNumber   String        @unique
  status        OrderStatus   @default(PENDING)
  
  // Customer info
  customerName  String
  customerEmail String
  customerPhone String
  
  // Shipping info
  shippingAddress  String
  shippingCity     String
  shippingDistrict String?
  shippingWard     String?
  
  // Payment
  paymentMethod   PaymentMethod  // COD, CARD, MOMO, VNPAY, etc.
  paymentStatus   PaymentStatus  @default(PENDING)
  
  // Crypto payment (n·∫øu d√πng crypto)
  cryptoWallet    String?
  cryptoNetwork   String?
  cryptoToken     String?
  cryptoTxHash    String?
  
  // Pricing
  subtotal      Float
  shippingFee   Float  @default(0)
  discount      Float  @default(0)
  total         Float
  
  items         OrderItem[]
}

enum OrderStatus {
  PENDING
  CONFIRMED
  PROCESSING
  SHIPPING
  DELIVERED
  CANCELLED
}

enum PaymentMethod {
  COD
  CARD
  MOMO
  VNPAY
  BANK_TRANSFER
  INSTALLMENT
  CRYPTO
}
```

### Migrations

```bash
# T·∫°o migration m·ªõi
npx prisma migrate dev --name your_migration_name

# Apply migrations
npx prisma migrate deploy

# Reset database (‚ö†Ô∏è x√≥a t·∫•t c·∫£ data)
npx prisma migrate reset

# Seed database
npm run seed
```

## üë• ƒê√≥ng G√≥p

1. **Fork** repository
2. **T·∫°o branch** cho feature: `git checkout -b feature/your-feature`
3. **Commit** changes: `git commit -m "Add your feature"`
4. **Push** to branch: `git push origin feature/your-feature`
5. **T·∫°o Pull Request**

### Coding Standards

- S·ª≠ d·ª•ng TypeScript
- Follow ESLint rules
- Vi·∫øt comments ti·∫øng Vi·ªát cho logic ph·ª©c t·∫°p
- T·∫°o commit message r√µ r√†ng

## üêõ Troubleshooting

### Git Issues

N·∫øu g·∫∑p l·ªói li√™n quan ƒë·∫øn Git (submodule, large files, etc.):
‚Üí Xem chi ti·∫øt trong [GIT_TROUBLESHOOTING.md](./GIT_TROUBLESHOOTING.md)

### Database Connection

```bash
# Ki·ªÉm tra DATABASE_URL
echo $DATABASE_URL

# Ki·ªÉm tra PostgreSQL service
pg_isready -h localhost -p 5432

# Reset migrations
npx prisma migrate reset
```

### Port Already in Use

```bash
# Windows
netstat -ano | findstr :3001
taskkill /PID <PID> /F

# macOS/Linux
lsof -i :3001
kill -9 <PID>
```

### Node Modules Issues

```bash
# Clear cache
npm cache clean --force

# Reinstall
rm -rf node_modules package-lock.json
npm install
```

## üìû Support & Contact

- **Issues**: GitHub Issues
- **Discussions**: GitHub Discussions
- **Email**: (Add if applicable)

## üìÑ License

MIT License - xem [LICENSE](./LICENSE) file

## üîÑ Changelog

### v1.0.0 (Current)

- ‚úÖ Basic authentication with JWT
- ‚úÖ Role-based access control (RBAC)
- ‚úÖ User session management
- ‚úÖ Next.js frontend with React
- ‚úÖ PostgreSQL database with Prisma
- ‚úÖ Docker support

---

**Cu·ªëi c√πng c·∫≠p nh·∫≠t**: December 13, 2025
